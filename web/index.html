<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CheckAI ‚Äî Chess for AI Agents</title>
    <link rel="stylesheet" href="/web/css/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Header -->
    <header id="app-header">
      <div class="header-inner">
        <div class="logo">
          <span class="logo-icon">‚ôî</span>
          <span class="logo-text">CheckAI</span>
        </div>
        <nav id="main-nav">
          <button class="nav-btn active" data-view="dashboard">
            <span class="nav-icon">‚äû</span>
            <span data-i18n="nav.dashboard">Dashboard</span>
          </button>
          <button class="nav-btn" data-view="game">
            <span class="nav-icon">‚ôü</span>
            <span data-i18n="nav.game">Game</span>
          </button>
          <button class="nav-btn" data-view="archive">
            <span class="nav-icon">üì¶</span>
            <span data-i18n="nav.archive">Archive</span>
          </button>
        </nav>
        <div class="header-status">
          <select
            id="lang-select"
            class="lang-select"
            title="Language"
          ></select>
          <span
            id="ws-status"
            class="ws-indicator disconnected"
            title="WebSocket Status"
            >‚¨§</span
          >
          <span id="ws-label">Disconnected</span>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main id="app">
      <!-- ========== DASHBOARD VIEW ========== -->
      <section id="view-dashboard" class="view active">
        <div class="section-header">
          <h1 data-i18n="dashboard.active_games">Active Games</h1>
          <button id="btn-new-game" class="btn btn-primary">
            <span>Ôºã</span> <span data-i18n="dashboard.new_game">New Game</span>
          </button>
        </div>

        <div id="games-list" class="games-grid">
          <div class="empty-state" id="no-games">
            <span class="empty-icon">‚ôî</span>
            <p data-i18n="dashboard.no_games">No games yet.</p>
            <p class="subtle" data-i18n="dashboard.no_games_hint">
              Create a new game to get started.
            </p>
          </div>
        </div>

        <!-- Storage Stats -->
        <div class="section-header" style="margin-top: 2rem">
          <h2 data-i18n="dashboard.storage_stats">Storage Statistics</h2>
          <button
            id="btn-refresh-stats"
            class="btn btn-ghost"
            data-i18n-title="dashboard.refresh"
            title="Refresh"
          >
            ‚Üª
          </button>
        </div>
        <div id="storage-stats" class="stats-grid">
          <div class="stat-card">
            <span class="stat-value" id="stat-active">‚Äì</span>
            <span class="stat-label" data-i18n="stat.active_games"
              >Active Games</span
            >
          </div>
          <div class="stat-card">
            <span class="stat-value" id="stat-archived">‚Äì</span>
            <span class="stat-label" data-i18n="stat.archived_games"
              >Archived Games</span
            >
          </div>
          <div class="stat-card">
            <span class="stat-value" id="stat-active-bytes">‚Äì</span>
            <span class="stat-label" data-i18n="stat.active_storage"
              >Active Storage</span
            >
          </div>
          <div class="stat-card">
            <span class="stat-value" id="stat-archive-bytes">‚Äì</span>
            <span class="stat-label" data-i18n="stat.archive_storage"
              >Archive Storage</span
            >
          </div>
        </div>
      </section>

      <!-- ========== GAME VIEW ========== -->
      <section id="view-game" class="view">
        <div id="game-placeholder" class="empty-state">
          <span class="empty-icon">‚ôü</span>
          <p data-i18n="game.no_game_selected">No game selected.</p>
          <p class="subtle" data-i18n="game.no_game_hint">
            Select a game from the dashboard or create a new one.
          </p>
        </div>

        <div id="game-container" class="game-layout" style="display: none">
          <!-- Left: Board -->
          <div class="board-wrapper">
            <div class="board-info-top">
              <div class="player-bar black-bar">
                <span class="player-piece">‚ôö</span>
                <span class="player-name" data-i18n="game.black">Black</span>
                <span id="black-status" class="player-status"></span>
              </div>
            </div>

            <div id="chess-board" class="chess-board"></div>

            <div class="board-info-bottom">
              <div class="player-bar white-bar">
                <span class="player-piece">‚ôî</span>
                <span class="player-name" data-i18n="game.white">White</span>
                <span id="white-status" class="player-status"></span>
              </div>
            </div>

            <!-- Promotion Dialog -->
            <div
              id="promotion-dialog"
              class="promotion-dialog"
              style="display: none"
            >
              <div class="promotion-overlay"></div>
              <div class="promotion-content">
                <h3 data-i18n="game.promotion_title">Pawn Promotion</h3>
                <div class="promotion-pieces">
                  <button class="promotion-btn" data-piece="Q">
                    <span class="promo-piece"></span>
                  </button>
                  <button class="promotion-btn" data-piece="R">
                    <span class="promo-piece"></span>
                  </button>
                  <button class="promotion-btn" data-piece="B">
                    <span class="promo-piece"></span>
                  </button>
                  <button class="promotion-btn" data-piece="N">
                    <span class="promo-piece"></span>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Right: Info Panel -->
          <div class="info-panel">
            <div class="panel-section">
              <h3 data-i18n="game.info">Game Info</h3>
              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label" data-i18n="game.game_id"
                    >Game ID</span
                  >
                  <span id="info-game-id" class="info-value mono">‚Äì</span>
                </div>
                <div class="info-item">
                  <span class="info-label" data-i18n="game.turn">Turn</span>
                  <span id="info-turn" class="info-value">‚Äì</span>
                </div>
                <div class="info-item">
                  <span class="info-label" data-i18n="game.move_number"
                    >Move Number</span
                  >
                  <span id="info-move-num" class="info-value">‚Äì</span>
                </div>
                <div class="info-item">
                  <span class="info-label" data-i18n="game.status">Status</span>
                  <span id="info-status" class="info-value">‚Äì</span>
                </div>
                <div class="info-item">
                  <span class="info-label" data-i18n="game.check">Check</span>
                  <span id="info-check" class="info-value">‚Äì</span>
                </div>
                <div class="info-item">
                  <span class="info-label" data-i18n="game.legal_moves"
                    >Legal Moves</span
                  >
                  <span id="info-legal-moves" class="info-value">‚Äì</span>
                </div>
              </div>
            </div>

            <!-- Game Message -->
            <div
              id="game-message"
              class="game-message"
              style="display: none"
            ></div>

            <!-- Actions -->
            <div class="panel-section" id="game-actions">
              <h3 data-i18n="game.actions">Actions</h3>
              <div class="action-buttons">
                <button
                  id="btn-resign"
                  class="btn btn-danger btn-sm"
                  data-i18n="game.resign"
                >
                  Resign
                </button>
                <button
                  id="btn-offer-draw"
                  class="btn btn-warning btn-sm"
                  data-i18n="game.offer_draw"
                >
                  Offer Draw
                </button>
                <button
                  id="btn-claim-draw"
                  class="btn btn-ghost btn-sm"
                  data-i18n="game.claim_draw"
                >
                  Claim Draw
                </button>
                <button
                  id="btn-delete-game"
                  class="btn btn-ghost btn-sm"
                  data-i18n="game.delete"
                >
                  Delete Game
                </button>
              </div>
            </div>

            <!-- Manual Move Input -->
            <div class="panel-section">
              <h3 data-i18n="game.move_input">Enter Move</h3>
              <div class="move-input-row">
                <input
                  type="text"
                  id="input-from"
                  class="move-input"
                  data-i18n-placeholder="game.from_placeholder"
                  placeholder="from (e.g. e2)"
                  maxlength="2"
                />
                <span class="move-arrow">‚Üí</span>
                <input
                  type="text"
                  id="input-to"
                  class="move-input"
                  data-i18n-placeholder="game.to_placeholder"
                  placeholder="to (e.g. e4)"
                  maxlength="2"
                />
                <button
                  id="btn-submit-move"
                  class="btn btn-primary btn-sm"
                  data-i18n="game.submit_move"
                >
                  Move
                </button>
              </div>
            </div>

            <!-- Move History -->
            <div class="panel-section">
              <h3 data-i18n="game.move_history">Move History</h3>
              <div id="move-history" class="move-history">
                <div class="empty-hint" data-i18n="game.no_moves">
                  No moves yet.
                </div>
              </div>
            </div>

            <!-- Castling Rights -->
            <div class="panel-section">
              <h3 data-i18n="game.castling_rights">Castling Rights</h3>
              <div id="castling-info" class="castling-grid">
                <div class="castling-item">
                  <span>‚ôî</span>
                  <span data-i18n="game.kingside">Kingside</span>:
                  <span id="castle-wk">‚úì</span>
                </div>
                <div class="castling-item">
                  <span>‚ôî</span>
                  <span data-i18n="game.queenside">Queenside</span>:
                  <span id="castle-wq">‚úì</span>
                </div>
                <div class="castling-item">
                  <span>‚ôö</span>
                  <span data-i18n="game.kingside">Kingside</span>:
                  <span id="castle-bk">‚úì</span>
                </div>
                <div class="castling-item">
                  <span>‚ôö</span>
                  <span data-i18n="game.queenside">Queenside</span>:
                  <span id="castle-bq">‚úì</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ========== ARCHIVE VIEW ========== -->
      <section id="view-archive" class="view">
        <div class="section-header">
          <h1 data-i18n="archive.title">Game Archive</h1>
          <button
            id="btn-refresh-archive"
            class="btn btn-ghost"
            data-i18n="archive.refresh"
          >
            ‚Üª Refresh
          </button>
        </div>

        <div id="archive-list" class="games-grid">
          <div class="empty-state" id="no-archive">
            <span class="empty-icon">üì¶</span>
            <p data-i18n="archive.no_games">No archived games yet.</p>
          </div>
        </div>

        <!-- Archive Replay -->
        <div id="archive-replay" style="display: none">
          <div class="section-header">
            <h2 id="replay-title" data-i18n="archive.replay">Replay</h2>
            <button
              id="btn-close-replay"
              class="btn btn-ghost"
              data-i18n="archive.close"
            >
              ‚úï Close
            </button>
          </div>
          <div class="replay-layout">
            <div class="board-wrapper">
              <div id="replay-board" class="chess-board"></div>
            </div>
            <div class="replay-controls">
              <div class="replay-slider-row">
                <button id="replay-start" class="btn btn-ghost btn-sm">
                  ‚èÆ
                </button>
                <button id="replay-prev" class="btn btn-ghost btn-sm">‚óÄ</button>
                <input
                  type="range"
                  id="replay-slider"
                  min="0"
                  max="0"
                  value="0"
                />
                <button id="replay-next" class="btn btn-ghost btn-sm">‚ñ∂</button>
                <button id="replay-end" class="btn btn-ghost btn-sm">‚è≠</button>
              </div>
              <div class="replay-info">
                <span data-i18n="archive.move_label">Move</span>
                <span id="replay-move-num">0</span> /
                <span id="replay-total-moves">0</span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@bquery/bquery@1/dist/full.umd.min.js"></script>
    <script src="/web/js/i18n.js"></script>
    <script src="/web/js/app.js"></script>
  </body>
</html>
