<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CheckAI ‚Äî Schach f√ºr KI-Agenten</title>
    <link rel="stylesheet" href="/web/css/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Header -->
    <header id="app-header">
      <div class="header-inner">
        <div class="logo">
          <span class="logo-icon">‚ôî</span>
          <span class="logo-text">CheckAI</span>
        </div>
        <nav id="main-nav">
          <button class="nav-btn active" data-view="dashboard">
            <span class="nav-icon">‚äû</span> Dashboard
          </button>
          <button class="nav-btn" data-view="game">
            <span class="nav-icon">‚ôü</span> Spiel
          </button>
          <button class="nav-btn" data-view="archive">
            <span class="nav-icon">üì¶</span> Archiv
          </button>
        </nav>
        <div class="header-status">
          <span
            id="ws-status"
            class="ws-indicator disconnected"
            title="WebSocket Status"
            >‚¨§</span
          >
          <span id="ws-label">Getrennt</span>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main id="app">
      <!-- ========== DASHBOARD VIEW ========== -->
      <section id="view-dashboard" class="view active">
        <div class="section-header">
          <h1>Aktive Spiele</h1>
          <button id="btn-new-game" class="btn btn-primary">
            <span>Ôºã</span> Neues Spiel
          </button>
        </div>

        <div id="games-list" class="games-grid">
          <div class="empty-state" id="no-games">
            <span class="empty-icon">‚ôî</span>
            <p>Noch keine Spiele vorhanden.</p>
            <p class="subtle">Erstelle ein neues Spiel um zu beginnen.</p>
          </div>
        </div>

        <!-- Storage Stats -->
        <div class="section-header" style="margin-top: 2rem">
          <h2>Speicherstatistik</h2>
          <button
            id="btn-refresh-stats"
            class="btn btn-ghost"
            title="Aktualisieren"
          >
            ‚Üª
          </button>
        </div>
        <div id="storage-stats" class="stats-grid">
          <div class="stat-card">
            <span class="stat-value" id="stat-active">‚Äì</span>
            <span class="stat-label">Aktive Spiele</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="stat-archived">‚Äì</span>
            <span class="stat-label">Archivierte Spiele</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="stat-active-bytes">‚Äì</span>
            <span class="stat-label">Aktiver Speicher</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="stat-archive-bytes">‚Äì</span>
            <span class="stat-label">Archiv-Speicher</span>
          </div>
        </div>
      </section>

      <!-- ========== GAME VIEW ========== -->
      <section id="view-game" class="view">
        <div id="game-placeholder" class="empty-state">
          <span class="empty-icon">‚ôü</span>
          <p>Kein Spiel ausgew√§hlt.</p>
          <p class="subtle">
            W√§hle ein Spiel aus dem Dashboard oder erstelle ein neues.
          </p>
        </div>

        <div id="game-container" class="game-layout" style="display: none">
          <!-- Left: Board -->
          <div class="board-wrapper">
            <div class="board-info-top">
              <div class="player-bar black-bar">
                <span class="player-piece">‚ôö</span>
                <span class="player-name">Schwarz</span>
                <span id="black-status" class="player-status"></span>
              </div>
            </div>

            <div id="chess-board" class="chess-board"></div>

            <div class="board-info-bottom">
              <div class="player-bar white-bar">
                <span class="player-piece">‚ôî</span>
                <span class="player-name">Wei√ü</span>
                <span id="white-status" class="player-status"></span>
              </div>
            </div>

            <!-- Promotion Dialog -->
            <div
              id="promotion-dialog"
              class="promotion-dialog"
              style="display: none"
            >
              <div class="promotion-overlay"></div>
              <div class="promotion-content">
                <h3>Bauernumwandlung</h3>
                <div class="promotion-pieces">
                  <button class="promotion-btn" data-piece="Q">
                    <span class="promo-piece"></span>
                  </button>
                  <button class="promotion-btn" data-piece="R">
                    <span class="promo-piece"></span>
                  </button>
                  <button class="promotion-btn" data-piece="B">
                    <span class="promo-piece"></span>
                  </button>
                  <button class="promotion-btn" data-piece="N">
                    <span class="promo-piece"></span>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Right: Info Panel -->
          <div class="info-panel">
            <div class="panel-section">
              <h3>Spielinfo</h3>
              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label">Spiel-ID</span>
                  <span id="info-game-id" class="info-value mono">‚Äì</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Am Zug</span>
                  <span id="info-turn" class="info-value">‚Äì</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Zugnummer</span>
                  <span id="info-move-num" class="info-value">‚Äì</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Status</span>
                  <span id="info-status" class="info-value">‚Äì</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Schach</span>
                  <span id="info-check" class="info-value">‚Äì</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Legale Z√ºge</span>
                  <span id="info-legal-moves" class="info-value">‚Äì</span>
                </div>
              </div>
            </div>

            <!-- Game Message -->
            <div
              id="game-message"
              class="game-message"
              style="display: none"
            ></div>

            <!-- Actions -->
            <div class="panel-section" id="game-actions">
              <h3>Aktionen</h3>
              <div class="action-buttons">
                <button id="btn-resign" class="btn btn-danger btn-sm">
                  Aufgeben
                </button>
                <button id="btn-offer-draw" class="btn btn-warning btn-sm">
                  Remis anbieten
                </button>
                <button id="btn-claim-draw" class="btn btn-ghost btn-sm">
                  Remis beanspruchen
                </button>
                <button id="btn-delete-game" class="btn btn-ghost btn-sm">
                  Spiel l√∂schen
                </button>
              </div>
            </div>

            <!-- Manual Move Input -->
            <div class="panel-section">
              <h3>Zug eingeben</h3>
              <div class="move-input-row">
                <input
                  type="text"
                  id="input-from"
                  class="move-input"
                  placeholder="von (z.B. e2)"
                  maxlength="2"
                />
                <span class="move-arrow">‚Üí</span>
                <input
                  type="text"
                  id="input-to"
                  class="move-input"
                  placeholder="nach (z.B. e4)"
                  maxlength="2"
                />
                <button id="btn-submit-move" class="btn btn-primary btn-sm">
                  Ziehen
                </button>
              </div>
            </div>

            <!-- Move History -->
            <div class="panel-section">
              <h3>Zughistorie</h3>
              <div id="move-history" class="move-history">
                <div class="empty-hint">Noch keine Z√ºge.</div>
              </div>
            </div>

            <!-- Castling Rights -->
            <div class="panel-section">
              <h3>Rochaderechte</h3>
              <div id="castling-info" class="castling-grid">
                <div class="castling-item">
                  <span>‚ôî</span> K√∂nigsseite: <span id="castle-wk">‚úì</span>
                </div>
                <div class="castling-item">
                  <span>‚ôî</span> Damenseite: <span id="castle-wq">‚úì</span>
                </div>
                <div class="castling-item">
                  <span>‚ôö</span> K√∂nigsseite: <span id="castle-bk">‚úì</span>
                </div>
                <div class="castling-item">
                  <span>‚ôö</span> Damenseite: <span id="castle-bq">‚úì</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ========== ARCHIVE VIEW ========== -->
      <section id="view-archive" class="view">
        <div class="section-header">
          <h1>Spielarchiv</h1>
          <button id="btn-refresh-archive" class="btn btn-ghost">
            ‚Üª Aktualisieren
          </button>
        </div>

        <div id="archive-list" class="games-grid">
          <div class="empty-state" id="no-archive">
            <span class="empty-icon">üì¶</span>
            <p>Noch keine archivierten Spiele.</p>
          </div>
        </div>

        <!-- Archive Replay -->
        <div id="archive-replay" style="display: none">
          <div class="section-header">
            <h2 id="replay-title">Wiedergabe</h2>
            <button id="btn-close-replay" class="btn btn-ghost">
              ‚úï Schlie√üen
            </button>
          </div>
          <div class="replay-layout">
            <div class="board-wrapper">
              <div id="replay-board" class="chess-board"></div>
            </div>
            <div class="replay-controls">
              <div class="replay-slider-row">
                <button id="replay-start" class="btn btn-ghost btn-sm">
                  ‚èÆ
                </button>
                <button id="replay-prev" class="btn btn-ghost btn-sm">‚óÄ</button>
                <input
                  type="range"
                  id="replay-slider"
                  min="0"
                  max="0"
                  value="0"
                />
                <button id="replay-next" class="btn btn-ghost btn-sm">‚ñ∂</button>
                <button id="replay-end" class="btn btn-ghost btn-sm">‚è≠</button>
              </div>
              <div class="replay-info">
                Zug <span id="replay-move-num">0</span> /
                <span id="replay-total-moves">0</span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="https://unpkg.com/@bquery/bquery@1/dist/full.umd.js"></script>
    <script src="/web/js/app.js"></script>
  </body>
</html>
